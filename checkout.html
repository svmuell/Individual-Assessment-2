<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checkout - Campus Supply Hub</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <img src="../images/campus supply logo.jpg" alt="Campus Supply Hub logo">
        <div><div style="font-weight:700">Campus Supply Hub</div><div class="small">Everything students need — organized, affordable, fast.</div></div>
      </div>
      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="cart.html">Cart <span id="cart-count" class="cart-badge">0</span></a>
        <a href="login.html">Login</a>
        <a href="register.html" class="primary">Register</a>
      </nav>
    </header>

    <main class="main">
      <section class="form" aria-label="Checkout">
        <h2>Checkout</h2>
        <form action="invoice.html" method="get" novalidate onsubmit="return processCheckout()">
          <h3>Shipping Information</h3>
          <label for="shipname">Full name</label>
          <input id="shipname" name="shipname" type="text" required>

          <label for="email">Email</label>
          <input id="email" name="email" type="email" required>

          <label for="phone">Phone Number</label>
          <input id="phone" name="phone" type="tel" required>

          <label for="address">Shipping address</label>
          <textarea id="address" name="address" rows="3" required></textarea>

          <div class="row">
            <div>
              <label for="city">City</label>
              <input id="city" name="city" type="text" required>
            </div>
            <div>
              <label for="postal">Postal Code</label>
              <input id="postal" name="postal" type="text" required>
            </div>
          </div>

          <h3>Payment Information</h3>
          <div class="row">
            <div>
              <label for="amount">Amount being paid (JMD)</label>
              <input id="amount" name="amount" type="number" required readonly>
            </div>
            <div>
              <label for="method">Payment method</label>
              <select id="method" name="method" required>
                <option value="">Select method</option>
                <option>Credit Card</option>
                <option>Debit Card</option>
                <option>Bank Transfer</option>
                <option>Cash On Delivery</option>
              </select>
            </div>
          </div>

          <div id="card-details" style="display: none;">
            <div class="row">
              <div>
                <label for="cardnumber">Card Number</label>
                <input id="cardnumber" name="cardnumber" type="text" placeholder="1234 5678 9012 3456">
              </div>
              <div>
                <label for="expiry">Expiry Date</label>
                <input id="expiry" name="expiry" type="text" placeholder="MM/YY">
              </div>
            </div>
            <div class="row">
              <div>
                <label for="cvv">CVV</label>
                <input id="cvv" name="cvv" type="text" placeholder="123">
              </div>
              <div>
                <label for="cardname">Name on Card</label>
                <input id="cardname" name="cardname" type="text">
              </div>
            </div>
          </div>

          <div class="actions">
            <button class="btn primary" type="submit">Confirm Order</button>
            <button class="btn ghost" type="button" onclick="window.location='cart.html'">Cancel</button>
            <button class="btn ghost" type="reset">Clear All</button>
            <button class="btn" type="button" onclick="window.history.back()">Close</button>
          </div>
        </form>
      </section>
    </main>

    <footer class="footer">
      © 2025 Campus Supply Hub · Module: Web Programming (CIT2011) · Student: Samuel Kelly, 2406535
    </footer>
  </div>
  
  <script src="script.js"></script>
  <script>
    // Update amount field with cart total
    document.addEventListener('DOMContentLoaded', function() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      let subtotal = 0;
      
      cart.forEach(item => {
        subtotal += item.price * item.quantity;
      });
      
      const discount = subtotal > 5000 ? 200 : 0;
      const tax = (subtotal - discount) * 0.15;
      const total = subtotal - discount + tax;
      
      document.getElementById('amount').value = total;
      
      // Show/hide card details based on payment method
      document.getElementById('method').addEventListener('change', function() {
        const cardDetails = document.getElementById('card-details');
        if (this.value === 'Credit Card' || this.value === 'Debit Card') {
          cardDetails.style.display = 'block';
        } else {
          cardDetails.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>